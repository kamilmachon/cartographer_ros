name: Publish Docker image
on: 
  workflow_dispatch:
    inputs:
      logLevel:
        description: 'Log level'     
        required: true
        default: 'warning'
      tags:
        description: 'Test scenario tags'  
jobs:
  push_to_registry:
    name: Push Docker image to Docker Hub
    runs-on: ubuntu-latest
    steps:
      - name: Checkout cartographer_ros
        uses: actions/checkout@v2
        with:
          repository:  kamilmachon/cartographer_ros
          path: cartographer_ros/
      - name: Checkout cartographer
        uses: actions/checkout@v2
        with:
          repository:  kamilmachon/cartographer
          path: cartographer/
      -
        name: Set up QEMU
        uses: docker/setup-qemu-action@v1
      -
        name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v1
      -
        name: Login to DockerHub
        uses: docker/login-action@v1 
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
      -
        name: Build and push
        id: docker_build
        uses: docker/build-push-action@v2
        with:
          push: true
          tags: kamilmachonhsrn/test
#       - name: Build container image
#         uses: docker/build-push-action@v2
#         with:
#           dockerfile: cartographer_ros/Dockerfile
#           username: ${{ github.actor }}
#           password: ${{ secrets.GITHUB_TOKEN }}
#           registry: docker.pkg.github.com
#           repository: ${{ github.repository }}/octo-image
#           tag_with_sha: true
#           tag_with_ref: true
#         - name: Push to Docker Hub
#           uses: docker/build-push-action@v1
#           with:
#             dockerfile: cartographer_ros/Dockerfile
#             username: ${{ secrets.DOCKERHUB_ID }}
#             password: ${{ secrets.DOCKERHUB_PASSWORD }}
#             repository: kamilmachonhsrn/test2
#             tag_with_ref: true




